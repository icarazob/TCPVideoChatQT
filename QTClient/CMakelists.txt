cmake_minimum_required ( VERSION 3.10.0 FATAL_ERROR)

project(HelloQt)

set(CMAKE_INCLUDE_CURRENT_DIR ON)

find_package(Qt5 COMPONENTS Widgets REQUIRED)
find_package(QT5 REQUIRED COMPONENTS Core Gui)
find_package(OpenCV REQUIRED)

set(EXECUTABLE_OUTPUT_PATH ${PROJECT_BINARY_DIR}/bin)

set(file_settings 
	${PROJECT_SOURCE_DIR}/settings/XMLsettings.xml
)
 
foreach(CONFIGURATION ${CMAKE_CONFIGURATION_TYPES})
	file(COPY ${file_settings} DESTINATION ${EXECUTABLE_OUTPUT_PATH}/${CONFIGURATION}/settings)
endforeach()

set(project_ui
	mainwindow.ui
	loginwindow.ui
)
set(SOURCES
	main.cpp
	mainwindow.cpp
	TCPClient.cpp
	loginwindow.cpp
)

set(HEADERS
	mainwindow.h
	TCPClient.h
	loginwindow.h
)

qt5_wrap_ui(project_headers_wrapped ${project_ui})
qt5_wrap_cpp(project_sources_moc ${HEADERS})

include_directories( ${OpenCV_INCLUDE_DIRS})
add_executable(${PROJECT_NAME} ${HEADERS} ${SOURCES} ${project_sources_moc}
	${project_headers_wrapped})
	

target_link_libraries(${PROJECT_NAME}
		PUBLIC
		Qt5::Core
		Qt5::Gui
		Qt5::Widgets
		${OpenCV_LIBS}
	)
